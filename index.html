
<!doctype html><html lang="pt-BR"><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Index â€” Dashboard Copas</title><script src="https://cdn.plot.ly/plotly-2.24.1.min.js"></script>
<style>:root{--bg:#0b1220;--card:#0f1724;--accent:#1f6feb;--muted:#94a3b8}body{margin:0;font-family:Inter,Segoe UI,Helvetica,Arial;background:var(--bg);color:#e6eef8}header{background:linear-gradient(90deg, rgba(31,111,235,0.12), rgba(20,20,30,0.04));padding:14px 18px;border-bottom:1px solid rgba(255,255,255,0.03)}.container{max-width:1200px;margin:14px auto;padding:0 16px}.nav{display:flex;gap:12px;align-items:center}.nav a{color:#cfe1ff;text-decoration:none;padding:8px 12px;border-radius:8px}.nav a:hover{background:rgba(255,255,255,0.02);color:white}.title{font-size:18px;font-weight:700;margin-right:12px;color:white}.card{background:var(--card);padding:12px;border-radius:10px;box-shadow:0 6px 18px rgba(2,6,23,0.6);min-width:140px}.kpi{font-size:18px;font-weight:700;color:#fff}.grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.full{grid-column:1/-1}.table-wrap{max-height:360px;overflow:auto;background:var(--card);padding:8px;border-radius:8px}.small{font-size:12px;color:var(--muted)}@media(max-width:900px){.grid{grid-template-columns:1fr}}</style></head><body>
<header><div class="container nav"><div class="title">Dashboard â€” Copas do Mundo</div><nav style="display:flex;gap:6px"><a href="index.html">ğŸ  InÃ­cio</a><a href="selecoes.html">ğŸ‡§ğŸ‡· SeleÃ§Ãµes</a><a href="estadios.html">ğŸŸï¸ EstÃ¡dios</a><a href="gols.html">âš½ Gols</a><a href="recordes.html">â­ Recordes</a><a href="analises.html">AnÃ¡lises Especiais</a></nav></div></header>
<main class="container"><div style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap">
  <div style="max-width:60%"><div class="small">VisÃ£o geral histÃ³rica</div><h2 style="margin:6px 0;color:white">Resumo das Copas do Mundo</h2><p class="small">Filtre nas pÃ¡ginas especÃ­ficas para anÃ¡lises detalhadas.</p></div>
  <div style="display:flex;gap:8px;align-items:center"><div class="card"><label class="small">Filtrar por Ano</label><br><select id="year-filter"><option value="all">Todas as Copas</option></select></div></div>
  <div style="display:flex;gap:8px;flex-wrap:wrap"><div class="card"><div class="small">Total de Copas</div><div id="kpi-cups" class="kpi">â€“</div></div><div class="card"><div class="small">Total de jogos</div><div id="kpi-games" class="kpi">â€“</div></div><div class="card"><div class="small">Total de gols</div><div id="kpi-goals" class="kpi">â€“</div></div><div class="card"><div class="small">SeleÃ§Ãµes</div><div id="kpi-teams" class="kpi">â€“</div></div></div></div>
<div class="grid" style="margin-top:14px">
  <div id="chart-goals-time" class="card full" style="min-height:340px"></div>
  <div id="chart-avggoals" class="card" style="min-height:320px"></div>
  <div id="chart-games-by-phase" class="card" style="min-height:320px"></div>
  <div class="card" style="min-height:320px"><h3 style="margin-top:0;color:white">Maior goleada geral</h3><div id="maior-goleada" class="kpi">â€“</div></div>
</div></main>
<footer style="color:var(--muted);text-align:center;padding:18px 0">Gerado automaticamente Â· Dados embutidos Â· Teste local ou GitHub Pages</footer>


<script src="dados.js"></script>
<script>
</script>

<script>
function updateIndexKPIs(){ const cups=unique(DATA.map(d=>d["Ano"])).length; const games=DATA.length; const goals=sum(DATA.map(d=> (Number(d["Placar A"]||0)+Number(d["Placar B"]||0)) )); const teams=unique(DATA.flatMap(d=>[d["Time A"],d["Time B"]])).length; document.getElementById('kpi-cups').innerText=cups; document.getElementById('kpi-games').innerText=games; document.getElementById('kpi-goals').innerText=goals; document.getElementById('kpi-teams').innerText=teams; }
function plotGoalsOverTime(){ const byYear={}; DATA.forEach(r=>{ const y=r["Ano"]; const g=Number(r["Placar A"]||0)+Number(r["Placar B"]||0); byYear[y]=(byYear[y]||0)+g; }); const xs=Object.keys(byYear).sort((a,b)=>a-b); const ys=xs.map(x=>byYear[x]); Plotly.newPlot('chart-goals-time',[{x:xs,y:ys,type:'scatter',mode:'lines+markers'}],{title:{text:'Gols por ediÃ§Ã£o'},paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',font:{color:'#e6eef8'}}); }
function plotAvgGoals(){ const stats={}; DATA.forEach(r=>{ const y=r["Ano"]; const g=Number(r["Placar A"]||0)+Number(r["Placar B"]||0); stats[y]=stats[y]||{goals:0,games:0}; stats[y].goals+=g; stats[y].games+=1; }); const xs=Object.keys(stats).sort((a,b)=>a-b); const ys=xs.map(x=> (stats[x].games? (stats[x].goals/stats[x].games):0).toFixed(2) ); Plotly.newPlot('chart-avggoals',[{x:xs,y:ys,type:'scatter',mode:'lines+markers',line:{color:'#ffcc00'}}],{title:{text:'MÃ©dia de gols por jogo por ediÃ§Ã£o'},paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',font:{color:'#e6eef8'}}); }
function plotGamesByPhase(){ const byP={}; DATA.forEach(r=> byP[r["Fase"]] = (byP[r["Fase"]]||0)+1 ); const phaseOrder = ["Final", "Decisao do Terceiro Lugar", "Semifinais", "Quartas-de-final", "Oitavas-de-final", "Segunda Fase", "Fase de Grupos", "Primeira Fase", "Grupo 1", "Grupo 2", "Grupo 3", "Grupo 4", "Grupo 5", "Grupo 6", "Grupo A", "Grupo B", "Grupo C", "Grupo D", "Grupo E", "Grupo F", "Grupo G", "Grupo H"]; const arr=Object.entries(byP).sort((a,b)=>phaseOrder.indexOf(a[0])-phaseOrder.indexOf(b[0])); const xs=arr.map(a=>a[0]); const ys=arr.map(a=>a[1]); Plotly.newPlot('chart-games-by-phase',[{x:xs,y:ys,type:'bar'}],{title:{text:'Jogos por fase'},paper_bgcolor:'rgba(0,0,0,0)',plot_bgcolor:'rgba(0,0,0,0)',font:{color:'#e6eef8'}}); }
function maiorGoleadaGeral(){ let best=null; let diff=0; DATA.forEach(r=>{ const a=Number(r["Placar A"]||0), b=Number(r["Placar B"]||0); const d=Math.abs(a-b); if(d>diff){ diff=d; best=r; } }); const el=document.getElementById('maior-goleada'); if(best) el.innerText = `${best["Time A"]} ${best["Placar A"]} Ã— ${best["Placar B"]} ${best["Time B"]} â€” ${best["Ano"]}`; else el.innerText='â€“'; }
const yearFilter = document.getElementById('year-filter');
const years = unique(DATA.map(d => d["Ano"])).sort((a, b) => a - b);
years.forEach(y => {
  const opt = document.createElement('option');
  opt.value = y;
  opt.text = y;
  yearFilter.appendChild(opt);
});

yearFilter.addEventListener('change', () => {
  const selectedYear = yearFilter.value;
  const filtered = (selectedYear === 'all') ? DATA : DATA.filter(d => d["Ano"] === Number(selectedYear));
  
  // Atualizar KPIs com dados filtrados
  const cups = unique(filtered.map(d => d["Ano"])).length;
  const games = filtered.length;
  const goals = sum(filtered.map(d => (Number(d["Placar A"] || 0) + Number(d["Placar B"] || 0))));
  const teams = unique(filtered.flatMap(d => [d["Time A"], d["Time B"]])).length;
  
  document.getElementById('kpi-cups').innerText = cups;
  document.getElementById('kpi-games').innerText = games;
  document.getElementById('kpi-goals').innerText = goals;
  document.getElementById('kpi-teams').innerText = teams;
  
  // Atualizar grÃ¡ficos com dados filtrados
  const byYear = {};
  filtered.forEach(r => {
    const y = r["Ano"];
    const g = Number(r["Placar A"] || 0) + Number(r["Placar B"] || 0);
    byYear[y] = (byYear[y] || 0) + g;
  });
  const xs = Object.keys(byYear).sort((a, b) => a - b);
  const ys = xs.map(x => byYear[x]);
  Plotly.newPlot('chart-goals-time', [{ x: xs, y: ys, type: 'scatter', mode: 'lines+markers' }], { title: { text: 'Gols por ediÃ§Ã£o' }, paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)', font: { color: '#e6eef8' } });
  
  // Atualizar grÃ¡fico de mÃ©dia de gols
  const stats = {};
  filtered.forEach(r => {
    const y = r["Ano"];
    const g = Number(r["Placar A"] || 0) + Number(r["Placar B"] || 0);
    stats[y] = stats[y] || { goals: 0, games: 0 };
    stats[y].goals += g;
    stats[y].games += 1;
  });
  const xs2 = Object.keys(stats).sort((a, b) => a - b);
  const ys2 = xs2.map(x => (stats[x].games ? (stats[x].goals / stats[x].games) : 0).toFixed(2));
  Plotly.newPlot('chart-avggoals', [{ x: xs2, y: ys2, type: 'scatter', mode: 'lines+markers', line: { color: '#ffcc00' } }], { title: { text: 'MÃ©dia de gols por jogo por ediÃ§Ã£o' }, paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)', font: { color: '#e6eef8' } });
  
  // Atualizar grÃ¡fico de jogos por fase
  const byP = {};
  filtered.forEach(r => byP[r["Fase"]] = (byP[r["Fase"]] || 0) + 1);
  const phaseOrder = ["Final", "Decisao do Terceiro Lugar", "Semifinais", "Quartas-de-final", "Oitavas-de-final", "Segunda Fase", "Fase de Grupos", "Primeira Fase", "Grupo 1", "Grupo 2", "Grupo 3", "Grupo 4", "Grupo 5", "Grupo 6", "Grupo A", "Grupo B", "Grupo C", "Grupo D", "Grupo E", "Grupo F", "Grupo G", "Grupo H"];
  const arr = Object.entries(byP).sort((a, b) => phaseOrder.indexOf(a[0]) - phaseOrder.indexOf(b[0]));
  const xs3 = arr.map(a => a[0]);
  const ys3 = arr.map(a => a[1]);
  Plotly.newPlot('chart-games-by-phase', [{ x: xs3, y: ys3, type: 'bar' }], { title: { text: 'Jogos por fase' }, paper_bgcolor: 'rgba(0,0,0,0)', plot_bgcolor: 'rgba(0,0,0,0)', font: { color: '#e6eef8' } });
  
  // Atualizar maior goleada
  let best = null;
  let diff = 0;
  filtered.forEach(r => {
    const a = Number(r["Placar A"] || 0);
    const b = Number(r["Placar B"] || 0);
    const d = Math.abs(a - b);
    if (d > diff) {
      diff = d;
      best = r;
    }
  });
  const el = document.getElementById('maior-goleada');
  if (best) el.innerText = `${best["Time A"]} ${best["Placar A"]} Ã— ${best["Placar B"]} ${best["Time B"]} â€” ${best["Ano"]}`;
  else el.innerText = 'â€“';
});

updateIndexKPIs(); plotGoalsOverTime(); plotAvgGoals(); plotGamesByPhase(); maiorGoleadaGeral();
</script>
</body></html>
